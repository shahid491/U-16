<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Time Zone Converter</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }
    .container {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
      text-align: center;
      max-width: 400px;
      width: 100%;
    }
    input, button {
  
      margin: 10px;
      padding: 8px;
      border-radius: 5px;
      border: 1px solid #ccc;
      width: 90%;
    }
    .dropdown {
      position: relative;
      width: 90%;
      margin: 10px auto;
    }
    .dropdown input {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    .dropdown-list {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      max-height: 200px;
      overflow-y: auto;
      background: white;
      border: 1px solid #ccc;
      border-radius: 5px;
      display: none;
      z-index: 100;
    }
    .dropdown-list div {
      padding: 8px;
      cursor: pointer;
    }
    .dropdown-list div:hover {
      background: #eee;
    }
    #result {
      margin-top: 20px;
      font-weight: bold;
      color: #333;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>üåç Time Zone Converter</h2>

    <label for="fromTime">Enter Time:</label>
    <input type="datetime-local" id="fromTime">

    <!-- Custom searchable dropdowns -->
    <label>From:</label>
    <div class="dropdown">
      <input type="text" id="fromZone" placeholder="Search or Select Time Zone">
      <div class="dropdown-list" id="fromZoneList"></div>
    </div>

    <label>To:</label>
    <div class="dropdown">
      <input type="text" id="toZone" placeholder="Search or Select Time Zone">
      <div class="dropdown-list" id="toZoneList"></div>
    </div>

    <button onclick="convertTime()">Convert</button>
    <div id="result"></div>
  </div>

  <script>
    const timeZones = Intl.supportedValuesOf("timeZone");

    function setupDropdown(inputId, listId) {
      const input = document.getElementById(inputId);
      const list = document.getElementById(listId);

      function showList(filtered) {
        list.innerHTML = "";
        filtered.forEach(zone => {
          const div = document.createElement("div");
          div.textContent = zone;
          div.onclick = () => {
            input.value = zone;
            list.style.display = "none";
          };
          list.appendChild(div);
        });
        list.style.display = filtered.length ? "block" : "none";
      }

      input.addEventListener("focus", () => showList(timeZones));
      input.addEventListener("input", () => {
        const val = input.value.toLowerCase();
        const filtered = timeZones.filter(z => z.toLowerCase().includes(val));
        showList(filtered);
      });
      document.addEventListener("click", (e) => {
        if (!list.contains(e.target) && e.target !== input) {
          list.style.display = "none";
        }
      });
    }

    function convertTime() {
      const fromTime = document.getElementById("fromTime").value;
      const fromZone = document.getElementById("fromZone").value;
      const toZone = document.getElementById("toZone").value;

      if (!fromTime || !fromZone || !toZone) {
        document.getElementById("result").innerText = "Please enter a time and select zones!";
        return;
      }

      const dateInSource = new Date(fromTime);

      // Convert to UTC by interpreting source zone
      const utcDate = new Date(dateInSource.toLocaleString("en-US", { timeZone: fromZone }));

      const options = {
        timeZone: toZone,
        hour12: true,
        year: "numeric",
        month: "short",
        day: "numeric",
        hour: "2-digit",
        minute: "2-digit"
      };

      const converted = utcDate.toLocaleString("en-US", options);
      document.getElementById("result").innerText = `Converted Time: ${converted}`;
    }

    // Setup dropdowns
    setupDropdown("fromZone", "fromZoneList");
    setupDropdown("toZone", "toZoneList");

    // Default values
    document.getElementById("fromZone").value = "Asia/Dubai";
    document.getElementById("toZone").value = "Asia/Kolkata";
  </script>
</body>
</html>
